<!DOCTYPE html>
<html lang="en">
<head>
<title>管理员列表</title>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="__PUBLIC__/css/bootstrap.min.css" />
<link rel="stylesheet" href="__PUBLIC__/css/bootstrap-responsive.min.css" />
<link rel="stylesheet" href="__PUBLIC__/css/uniform.css" />
<link rel="stylesheet" href="__PUBLIC__/css/matrix-style.css" />
<link rel="stylesheet" href="__PUBLIC__/css/matrix-media.css" />
<link href="__PUBLIC__/font-awesome/css/font-awesome.css" rel="stylesheet" />
<link rel="stylesheet" href="__PUBLIC__/css/ui-dialog.css">
<link rel="stylesheet" href="__PUBLIC__/css/tip.css">
<link rel="icon" href="__PUBLIC__/images/logo.png"  type="image/x-icon" />
<style type='text/css'>
	*{
		font-family:'微软雅黑';
	}
    .btn{
        font-family:'微软雅黑';
    }
</style>
</head>
<body>
<include file="Public/header" />
<!--sidebar-menu-->
<include file="Public/menu" />
<!--sidebar-menu-->
<div id="content">
  <div id="content-header">
      <div id="breadcrumb"> <a href="index.html" title="Go to Home" class="tip-bottom"><i class="icon-home"></i> 首页</a> <a href="#" class="tip-bottom">管理员管理</a> <a href="#" class="current">管理员列表</a> </div>
  </div>
  <div class="container-fluid">
    <hr>
    <div class="row-fluid">
      <div class="span12">
          <form method="post" action="__ROOT__/Zoneadmin/Member/lists">
          选择条件：<input type="text"  class="span2" placeholder="输入昵称" name="where"  style="margin-top: 9px;" />
          <button type="submit" class="btn" >搜索</button>
          </form>
        <div class="widget-box">
          <div class="widget-title"> <span class="icon">
            <input type="checkbox" id="title-checkbox" name="title-checkbox" />
            </span>
            <h5>全选 </h5>
          </div>
          <div class="widget-content nopadding">
            <table class="table table-bordered table-striped with-check">
              <thead>
                <tr>
                  <th><i class="icon-resize-vertical"></i></th>
                  <th>昵称</th>
                  <th>联系电话</th>
                  <th>邮箱</th>
                  <th>会员等级</th>
                  <th>会员积分</th>
                  <th>注册时间</th>
                  <th>备注信息</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
              <form method="post" action="__ROOT__/Zoneadmin/Member/delall" id="delall">
              <volist name="admins" id="admins">
                <tr>
                  <td><input type="checkbox" name="ids[]" value="{$admins.id}" class="checkbox"  /></td>
                  <td style="text-align: center">{$admins.nickname}</td>
                  <td style="text-align: center">{$admins.phone}</td>
                  <td style="text-align: center">{$admins.email}</td>
                  <td style="text-align: center">
                      <if condition="$admins['lev'] eq 0">普通会员</if>
                      <if condition="$admins['lev'] eq 1">二级会员</if>
                      <if condition="$admins['lev'] eq 2">三级会员</if>
                      <if condition="$admins['lev'] eq 3">四级会员</if>
                  </td>
                  <td style="text-align: center">{$admins.score}</td>
                  <td style="text-align: center">{$admins.reg_time|date='Y-m-d H:i:s',###}</td>
                   <if condition="$admins['remark']">
                       <td style="text-align: center">{$admins.remark}</td>
                       <else />
                       <td style="text-align: center">无备注信息！</td>
                    </if>

                  <td class="center" style="text-align: center">
                      <button class="btn btn-mini btn-info edit" type="button" alt="on" attr="{$admins.id}">编辑</button>
                      <if condition="$admins['lock'] eq 1">
                          <button class="btn btn-mini btn-success turn" type="button" alt="on" attr="{$admins.id}">开启</button>
                      </if>
                      <if condition="$admins['lock'] eq 0">
                          <button class="btn btn-mini btn-warning turn" type="button" alt="off" attr="{$admins.id}">禁用</button>
                      </if>

                      <button class="btn btn-mini btn-danger turn" type="button" alt="del" attr="{$admins.id}">删除</button>
                  </td>
                </tr>
              </volist>
                <tr><td colspan="9"><button class="btn btn-mini btn-danger delall" type="button">全部删除</button></td></tr>
              </form>
              </tbody>
            </table>
          </div>
          <div class="span8">
              <div class="dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_full_numbers" id="DataTables_Table_0_paginate">
                  <!--<a tabindex="0" class="first ui-corner-tl ui-corner-bl fg-button ui-button ui-state-default ui-state-disabled" id="DataTables_Table_0_first">第一页</a>-->
                  <!--<a tabindex="0" class="previous fg-button ui-button ui-state-default ui-state-disabled" id="DataTables_Table_0_previous">上一页</a>-->
                  <!--<span>-->
                      <!--<a tabindex="0" class="fg-button ui-button ui-state-default ui-state-disabled">1</a>-->
                      <!--<a tabindex="0" class="fg-button ui-button ui-state-default">2</a>-->
                      <!--<a tabindex="0" class="fg-button ui-button ui-state-default">3</a>-->
                      <!--<a tabindex="0" class="fg-button ui-button ui-state-default">4</a>-->
                      <!--<a tabindex="0" class="fg-button ui-button ui-state-default">5</a>-->
                      <!--<a tabindex="0" class="fg-button ui-button ui-state-default">6</a>-->
                      <!--<a tabindex="0" class="fg-button ui-button ui-state-default">7</a>-->
                      <!--<a tabindex="0" class="fg-button ui-button ui-state-default">8</a>-->
                      <!--<a tabindex="0" class="fg-button ui-button ui-state-default">9</a>-->
                      <!--<a tabindex="0" class="fg-button ui-button ui-state-default">10</a>-->
                  <!--</span>-->
                  <!--<a tabindex="0" class="next fg-button ui-button ui-state-default" id="DataTables_Table_0_next">下一页</a>-->
                  <!--<a tabindex="0" class="last ui-corner-tr ui-corner-br fg-button ui-button ui-state-default" id="DataTables_Table_0_last">最后一页</a></div>-->
                  {$page}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--Footer-part-->
<include file="Public/footer" />
<!--end-Footer-part-->
<script src="__PUBLIC__/js/jquery.min.js"></script> 
<script src="__PUBLIC__/js/jquery.ui.custom.js"></script> 
<script src="__PUBLIC__/js/bootstrap.min.js"></script> 
<script src="__PUBLIC__/js/jquery.uniform.js"></script>
    <script src="__PUBLIC__/js/matrix.js"></script>
<script src="__PUBLIC__/dist/dialog-min.js"></script>
<script src="__PUBLIC__/dist/dialog-plus.js"></script>
<script src="__PUBLIC__/js/tip.js"></script>
<script type="text/javascript">
    $(function(){
        var attr=$('#member').attr('attr');
        var p='{$position}';
        if(attr==p){
            $('#member').children('ul').css('display','block');
        }
        $('.turn').click(function(){
            var act=$(this).attr('alt');
            var id=$(this).attr('attr');
            if(act=='del'){
                var d = dialog({
                title: '信息提示',
                content: '您确定要删除该管理员吗？！',
                okValue: '确定',
                ok: function () {
                    $.post(
                            "__ROOT__/Zoneadmin/Member/ajax.html",
                            {act:act,id:id},
                            function(data){
                                if(data==1){
                                    viitip('success','数据删除成功！',1000);
                                    setTimeout(function(){
                                        location.reload();
                                    },1500)
                                }else{
                                    viitip('error','数据删除失败！',1000);
                                }
                            }
                    );
                },
                cancelValue: '取消',
                cancel: function () {}
            });
            d.showModal();
            }else{
                $.post(
                        "__ROOT__/Zoneadmin/Member/ajax.html",
                        {act:act,id:id},
                        function(data){
                            if(data==1){
                                viitip('success','操作成功！',1000);
                                setTimeout(function(){
                                    location.reload();
                                },1500)
                            }else{
                                viitip('error','操作失败！',1000);
                            }
                        }
                );
            }
        })

        $('.edit').click(function(){
            var id=$(this).attr('attr');
            var spurl="__ROOT__/Zoneadmin/Member/edit/id/"+id;
            var  d=dialog({
                id: 'open',
                title: '编辑管理员',
                url: spurl,
                cancelValue: '关闭窗口',
                cancel: function () {}
            });
            d.showModal();
        })

        $('.delall').click(function(){
            var d = dialog({
                title: '信息提示',
                content: '您确定要删除全部管理员吗？！',
                okValue: '确定',
                ok: function () {
                    $('#delall').submit();
                },
                cancelValue: '取消',
                cancel: function () {}
            });
            d.showModal();
        })

        $('#title-checkbox').click(function(){
            var c=$(this).attr('checked');
              if(c=='checked'){
                  $('.checkbox').attr('checked','checked');
              }else{
                  $('.checkbox').removeAttr('checked');
              }
        })
    })
</script>
</body>
</html>
